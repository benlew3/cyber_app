{
  "lesson_id": "D3-LESSON-001",
  "domain": 3,
  "title": "Security Architecture Concepts",
  "objectives_covered": ["3.1"],
  "estimated_duration": "45-55 minutes",
  "difficulty": "intermediate",
  "prerequisites": ["D1-LESSON-001"],

  "introduction": {
    "hook": "When engineers designed the Titanic, they created watertight compartments so the ship could survive flooding in any four compartments. But they didn't extend the bulkheads high enoughâ€”water could spill over from one compartment to the next. The ship sank not because one compartment failed, but because the architecture allowed failure to cascade. Security architecture faces the same challenge: designing systems where a breach in one area doesn't sink the entire organization. Good security architecture builds in containment, resilience, and defense in depth from the ground up.",
    "learning_goals": [
      "Apply security architecture principles including defense in depth and zero trust",
      "Design network architectures with appropriate segmentation and zones",
      "Implement secure system design patterns for various deployment scenarios",
      "Understand the role of security in enterprise architecture frameworks",
      "Balance security requirements with business needs and usability"
    ],
    "why_it_matters": "Security architecture determines how well an organization can prevent, detect, and recover from attacks. Poor architecture creates systemic vulnerabilities that no amount of point solutions can fix. Security professionals design secure architectures, evaluate proposed designs, and identify architectural weaknesses. Whether you're building new systems or assessing existing ones, architectural thinking is essential. Expect 5-7 Security+ questions on architecture concepts, design principles, and secure topology."
  },

  "sections": [
    {
      "section_id": "D3-L001-S01",
      "title": "Security Architecture Fundamentals",
      "content": "Security architecture provides the structural framework for implementing security controls consistently across an organization's technology environment.\n\n**What is Security Architecture?**\n\n*Definition*\n- Blueprint for security implementation\n- Defines security structure and behavior\n- Guides technology decisions\n- Aligns security with business goals\n- Provides consistent approach\n\n*Components*\n- Principles (guiding beliefs)\n- Policies (rules and requirements)\n- Standards (specific implementations)\n- Guidelines (recommendations)\n- Procedures (step-by-step processes)\n\n**Architecture Principles**\n\n*Defense in Depth*\n- Multiple layers of security\n- No single point of failure\n- Assume outer layers will fail\n- Each layer slows attackers\n- Time for detection and response\n\n*Least Privilege*\n- Minimum access required\n- Just enough permissions\n- Reduces blast radius\n- Limits insider threat\n- Default deny approach\n\n*Separation of Duties*\n- Critical functions divided\n- No single person controls all\n- Requires collusion for fraud\n- Checks and balances\n\n*Fail Secure*\n- Default to secure state on failure\n- Don't expose data when errors occur\n- Closed rather than open on fault\n- Exception handling matters\n\n**Security Domains**\n\n*Physical Security*\n- Facilities and access\n- Environmental controls\n- Hardware protection\n\n*Network Security*\n- Perimeter and internal\n- Traffic control and monitoring\n- Segmentation\n\n*Application Security*\n- Secure development\n- Input/output handling\n- Authentication/authorization\n\n*Data Security*\n- Classification and handling\n- Encryption and protection\n- Lifecycle management\n\n*Identity Security*\n- Authentication systems\n- Access management\n- Directory services\n\n**Architecture Frameworks**\n\n*SABSA*\n- Sherwood Applied Business Security Architecture\n- Risk-driven approach\n- Business requirements focus\n- Layered model\n\n*TOGAF*\n- The Open Group Architecture Framework\n- Enterprise architecture\n- Security integrated throughout\n- ADM (Architecture Development Method)\n\n*Zachman Framework*\n- Enterprise architecture\n- Matrix of perspectives\n- What, how, where, who, when, why",

      "key_points": [
        "Security architecture provides the blueprint for consistent security implementation",
        "Defense in depth uses multiple layers; assume outer layers will fail",
        "Least privilege grants minimum access required; fail secure defaults to safe state",
        "Architecture covers physical, network, application, data, and identity domains",
        "SABSA is security-specific; TOGAF and Zachman are enterprise architecture frameworks"
      ],

      "real_world_example": {
        "scenario": "Defense in depth preventing breach escalation",
        "company": "Pinnacle Financial Services",
        "application": "When attackers compromised a Pinnacle workstation via phishing, defense in depth limited the damage: LAYER 1 FAILED (email filter missed phishing, user clicked link), LAYER 2 HELD PARTIALLY (endpoint protection detected but couldn't block zero-day), LAYER 3 CONTAINED (network segmentation prevented spread to sensitive systems), LAYER 4 DETECTED (SIEM correlated unusual behavior, alerted SOC), LAYER 5 RESPONDED (SOC isolated workstation within 15 minutes), OUTCOME (one workstation compromised, no lateral movement, no data exfiltration). Without defense in depth, single-layer failure would have meant full breach."
      },

      "exam_tips": [
        "Defense in depth = multiple layers (no single point of failure)",
        "Least privilege = minimum access required to perform job",
        "Fail secure = default to secure/closed state on failure",
        "SABSA = security architecture framework (business-driven)",
        "Separation of duties = divide critical functions (prevent fraud)"
      ],

      "glossary_terms": [
        {
          "term": "Security Architecture",
          "definition": "A structured framework that defines how security controls are implemented across an organization's technology environment to protect assets and achieve security objectives.",
          "exam_note": "Blueprint for security. Consistent approach. Aligns with business. Guides decisions."
        },
        {
          "term": "Defense in Depth",
          "definition": "A security strategy that implements multiple layers of controls so that if one layer fails, others continue to provide protection.",
          "exam_note": "Multiple layers. No single point of failure. Assume layers will fail. Core principle."
        },
        {
          "term": "Fail Secure",
          "definition": "A design principle where systems default to a secure state when failures occur, preventing unauthorized access during error conditions.",
          "exam_note": "Default to secure on failure. Closed not open. Opposite of fail open."
        },
        {
          "term": "SABSA",
          "definition": "Sherwood Applied Business Security Architectureâ€”a framework for developing risk-driven enterprise security architecture aligned with business requirements.",
          "exam_note": "Security architecture framework. Business-driven. Risk-focused. Layered model."
        }
      ],

      "knowledge_check": {
        "question": "A web application is designed so that if the authentication system fails, users cannot access any functionality until it's restored. This is an example of which security principle?",
        "options": [
          "Defense in depth because multiple controls are used",
          "Least privilege because users have limited access",
          "Fail secure because the system defaults to a safe state",
          "Separation of duties because functions are divided"
        ],
        "correct": 2,
        "explanation": "This is fail secureâ€”when a failure occurs (authentication system down), the system defaults to a secure state (no access) rather than allowing access without authentication. Defense in depth involves multiple layers. Least privilege is about minimum necessary access. Separation of duties divides critical functions."
      }
    },
    {
      "section_id": "D3-L001-S02",
      "title": "Network Security Architecture",
      "content": "Network security architecture defines how network infrastructure is designed and segmented to protect systems and data.\n\n**Network Zones**\n\n*Internet/External Zone*\n- Untrusted network\n- Public internet\n- No control over traffic\n- Assume hostile\n\n*DMZ (Demilitarized Zone)*\n- Buffer between external and internal\n- Public-facing services\n- Limited internal access\n- Controlled exposure\n\n*Internal/Corporate Zone*\n- Trusted network\n- Business operations\n- Not accessible from internet\n- Requires authentication\n\n*Restricted/Sensitive Zone*\n- Highest security\n- Critical data and systems\n- Strict access control\n- Enhanced monitoring\n\n**Network Segmentation**\n\n*Purpose*\n- Limit blast radius\n- Contain breaches\n- Support compliance\n- Enable monitoring\n- Simplify management\n\n*Implementation Methods*\n\n*Physical Segmentation*\n- Separate hardware\n- Complete isolation\n- Most secure\n- Most expensive\n\n*Logical Segmentation (VLANs)*\n- Virtual separation\n- Same physical infrastructure\n- Cost-effective\n- Requires proper configuration\n\n*Software-Defined Segmentation*\n- Micro-segmentation\n- Workload-level isolation\n- Policy-based\n- Dynamic adaptation\n\n**Perimeter Architecture**\n\n*Traditional Perimeter*\n- Clear inside/outside boundary\n- Firewall at edge\n- Trust internal network\n- Castle and moat model\n\n*Modern Perimeter Challenges*\n- Cloud services blur boundary\n- Remote work extends network\n- Mobile devices\n- Third-party integrations\n- Perimeter is everywhere\n\n*Evolving Approaches*\n- Zero trust (verify everything)\n- Identity-based perimeter\n- Software-defined perimeter\n- Secure Access Service Edge (SASE)\n\n**Traffic Flow Control**\n\n*North-South Traffic*\n- Into and out of network\n- Through perimeter\n- Traditional firewall focus\n\n*East-West Traffic*\n- Within the network\n- Lateral movement\n- Often less monitored\n- Increasingly important\n\n*Micro-segmentation*\n- Controls east-west traffic\n- Workload-level policies\n- Limits lateral movement\n- Zero trust implementation",

      "key_points": [
        "Network zones: External (untrusted) â†’ DMZ (buffer) â†’ Internal â†’ Restricted",
        "Segmentation limits blast radius and contains breaches",
        "Physical segmentation most secure; VLANs cost-effective; SDN most flexible",
        "North-south traffic = in/out of network; East-west = within network",
        "Micro-segmentation controls east-west traffic at workload level"
      ],

      "real_world_example": {
        "scenario": "Network segmentation containing ransomware",
        "company": "MedCare Health Systems",
        "application": "MedCare's segmented architecture limited a ransomware incident: ARCHITECTURE (four segments: general users, clinical systems, medical devices, administrative), INCIDENT (ransomware entered via phishing on general user workstation, began encrypting files), CONTAINMENT (ransomware couldn't reach clinical segmentâ€”no SMB allowed between zones, medical devices completely isolated on separate VLAN with no internet access, administrative systems protected by firewall rules), IMPACT (23 workstations in general segment encrypted, 0 clinical systems affected, 0 patient data compromised), RECOVERY (general segment restored from backup in 8 hours). Without segmentation, all 2,000 systems would have been at risk."
      },

      "exam_tips": [
        "DMZ = buffer zone for public-facing services",
        "VLAN = logical segmentation (same hardware, virtual separation)",
        "Micro-segmentation = workload-level (east-west traffic control)",
        "North-south = perimeter traffic; East-west = internal/lateral",
        "Traditional perimeter assumes trusted insideâ€”no longer valid"
      ],

      "glossary_terms": [
        {
          "term": "DMZ (Demilitarized Zone)",
          "definition": "A network segment between the external internet and internal network that hosts public-facing services while protecting internal systems.",
          "exam_note": "Buffer zone. Public services. Limited internal access. Dual firewall typical."
        },
        {
          "term": "Network Segmentation",
          "definition": "Dividing a network into separate zones or segments with controlled access between them to limit the spread of attacks.",
          "exam_note": "Limits blast radius. Contains breaches. VLANs, firewalls. Essential architecture."
        },
        {
          "term": "Micro-segmentation",
          "definition": "A security technique that creates fine-grained security zones around individual workloads or applications, controlling east-west traffic.",
          "exam_note": "Workload-level isolation. East-west traffic control. Zero trust enabler."
        },
        {
          "term": "East-West Traffic",
          "definition": "Network traffic that moves laterally within a network, between internal systems, as opposed to north-south traffic crossing the perimeter.",
          "exam_note": "Internal/lateral traffic. Often less monitored. Where attackers move after entry."
        }
      ],

      "knowledge_check": {
        "question": "An organization wants to limit the ability of attackers to move between workloads after gaining initial access. They implement policies that control traffic at the individual application level. This approach is called:",
        "options": [
          "VLAN segmentation because it separates network traffic",
          "DMZ architecture because it creates buffer zones",
          "Micro-segmentation because it provides workload-level control",
          "Perimeter defense because it protects network boundaries"
        ],
        "correct": 2,
        "explanation": "This is micro-segmentationâ€”creating fine-grained security zones around individual workloads with policies controlling traffic between them. This specifically addresses east-west (lateral) movement. VLANs provide broader network separation. DMZ is specifically for public-facing services. Perimeter defense focuses on north-south traffic."
      }
    },
    {
      "section_id": "D3-L001-S03",
      "title": "Zero Trust Architecture",
      "content": "Zero Trust is a security model that eliminates implicit trust, requiring verification of every access request regardless of source.\n\n**Zero Trust Principles**\n\n*Core Concept*\n- Never trust, always verify\n- Assume breach\n- Verify explicitly\n- Least privilege access\n- Minimize blast radius\n\n*Key Tenets*\n\n*1. Verify Explicitly*\n- Authenticate every request\n- Authorize based on all signals\n- User, device, location, behavior\n- Continuous validation\n\n*2. Least Privilege Access*\n- Just-in-time access\n- Just-enough access\n- Risk-based adaptive policies\n- No standing privileges\n\n*3. Assume Breach*\n- Design for compromise\n- Minimize blast radius\n- Segment access\n- End-to-end encryption\n- Analytics and monitoring\n\n**Zero Trust Components**\n\n*Identity*\n- Strong authentication (MFA)\n- Identity verification\n- Conditional access\n- Identity governance\n\n*Device*\n- Device health verification\n- Compliance checking\n- Managed vs. unmanaged\n- Risk assessment\n\n*Network*\n- Micro-segmentation\n- Encrypted communications\n- Software-defined perimeter\n- No trusted networks\n\n*Application*\n- Application-level access\n- API security\n- Workload protection\n- In-app controls\n\n*Data*\n- Data classification\n- Encryption\n- Rights management\n- Data loss prevention\n\n**Zero Trust vs. Traditional**\n\n*Traditional Model*\n- Trust but verify\n- Perimeter-based\n- Inside = trusted\n- Network location matters\n- Implicit trust\n\n*Zero Trust Model*\n- Never trust, always verify\n- Identity-based\n- No trusted networks\n- Context matters\n- Explicit verification\n\n**Implementation Approach**\n\n*Phased Implementation*\n1. Identify protect surface (critical assets)\n2. Map transaction flows\n3. Build zero trust architecture\n4. Create policies\n5. Monitor and maintain\n\n*Quick Wins*\n- MFA everywhere\n- Conditional access policies\n- Device compliance\n- Network segmentation\n- Enhanced monitoring",

      "key_points": [
        "Zero Trust: never trust, always verifyâ€”assumes breach",
        "Three principles: verify explicitly, least privilege, assume breach",
        "Considers identity, device, network, application, and data",
        "Traditional = perimeter-based trust; Zero Trust = verify everything",
        "Implementation is phased: protect surface â†’ flows â†’ architecture â†’ policies"
      ],

      "real_world_example": {
        "scenario": "Zero Trust preventing credential theft impact",
        "company": "NexaTech Solutions",
        "application": "NexaTech implemented Zero Trust after a credential phishing incident: BEFORE (stolen credentials = full VPN access to everything), ZERO TRUST IMPLEMENTATION (MFA required for all access, conditional access based on device health and location, application-level access controls, no broad VPN access, continuous session monitoring), SUBSEQUENT INCIDENT (attacker obtained credentials via phishing, attempted login), ZERO TRUST RESPONSE (MFA challenge blocked unauthorized device, even if bypassed, unregistered device would fail compliance check, access would be limited to specific approved applications, not full network, anomalous behavior would trigger re-authentication), OUTCOME (stolen credentials nearly uselessâ€”multiple verification layers prevented access). Zero Trust made single-factor compromise ineffective."
      },

      "exam_tips": [
        "Zero Trust = never trust, always verify (not 'trust but verify')",
        "Three tenets: verify explicitly, least privilege, assume breach",
        "Zero Trust covers: identity, device, network, application, data",
        "MFA is foundational to Zero Trust implementation",
        "No implicit trust based on network location"
      ],

      "glossary_terms": [
        {
          "term": "Zero Trust",
          "definition": "A security model based on the principle of 'never trust, always verify,' requiring explicit verification for every access request regardless of source.",
          "exam_note": "Never trust, always verify. Assume breach. No trusted networks. Identity-based."
        },
        {
          "term": "Assume Breach",
          "definition": "A Zero Trust principle that designs security controls assuming attackers are already present, focusing on minimizing damage and detecting intrusions.",
          "exam_note": "Design for compromise. Minimize blast radius. Continuous monitoring. Segmentation."
        },
        {
          "term": "Conditional Access",
          "definition": "Policies that grant or deny access based on multiple factors including user identity, device compliance, location, and risk level.",
          "exam_note": "Context-based access decisions. Multiple factors. Zero Trust implementation. Dynamic."
        },
        {
          "term": "Software-Defined Perimeter (SDP)",
          "definition": "A security framework that dynamically creates one-to-one network connections between users and resources, hiding infrastructure from unauthorized users.",
          "exam_note": "Dynamic perimeter. Hides resources. Identity-based. Zero Trust networking."
        }
      ],

      "knowledge_check": {
        "question": "An organization's security model requires that all access requests be authenticated and authorized based on multiple factors including user identity, device health, and locationâ€”even for internal users on the corporate network. This describes which architecture?",
        "options": [
          "Perimeter security because it controls network access",
          "Defense in depth because it uses multiple layers",
          "Zero Trust because it verifies all access regardless of location",
          "DMZ architecture because it creates buffer zones"
        ],
        "correct": 2,
        "explanation": "This describes Zero Trustâ€”the model requires explicit verification for all access requests regardless of network location. The key indicator is 'even for internal users on the corporate network,' which distinguishes Zero Trust from traditional perimeter security that trusts internal traffic. Defense in depth is layered security. DMZ is a specific network zone."
      }
    },
    {
      "section_id": "D3-L001-S04",
      "title": "Secure System Design",
      "content": "Secure system design incorporates security throughout the system lifecycle, from initial design through deployment and operations.\n\n**Secure Design Principles**\n\n*Security by Design*\n- Build security in from start\n- Not bolted on later\n- Part of requirements\n- Considered in every decision\n\n*Privacy by Design*\n- Privacy considered from start\n- Data minimization\n- Purpose limitation\n- User control\n- Regulatory compliance (GDPR)\n\n**Design Patterns**\n\n*Input Validation*\n- Validate all input\n- Server-side validation\n- Whitelist approach\n- Type, length, format, range\n\n*Output Encoding*\n- Encode for context\n- Prevent injection\n- HTML, JavaScript, URL, SQL\n\n*Secure Defaults*\n- Secure out of the box\n- Minimum functionality enabled\n- User must opt into risk\n- Conservative configurations\n\n*Cryptographic Protection*\n- Encrypt sensitive data\n- Use standard algorithms\n- Proper key management\n- In transit and at rest\n\n**Architecture Considerations**\n\n*Scalability*\n- Can security scale with system?\n- Performance impact\n- Centralized vs. distributed\n\n*Availability*\n- Redundancy for security systems\n- Failover capabilities\n- No single points of failure\n\n*Resiliency*\n- Graceful degradation\n- Recovery capabilities\n- Business continuity\n\n**Deployment Models**\n\n*On-Premises*\n- Full control\n- Physical security responsibility\n- Infrastructure management\n- Capital expense\n\n*Cloud*\n- Shared responsibility\n- Provider security capabilities\n- Configuration critical\n- Operational expense\n\n*Hybrid*\n- Mix of on-prem and cloud\n- Connectivity security\n- Consistent policy\n- Complex to manage\n\n*Multi-Cloud*\n- Multiple cloud providers\n- Avoid vendor lock-in\n- Inconsistent security models\n- Requires abstraction\n\n**Baseline Configurations**\n\n*Concept*\n- Standard secure configuration\n- Consistent across systems\n- Documented and maintained\n- Deviation tracking\n\n*Benefits*\n- Reduced attack surface\n- Faster deployment\n- Easier compliance\n- Simplified management",

      "key_points": [
        "Security by design builds security in from start, not bolted on later",
        "Privacy by design includes data minimization and purpose limitation",
        "Secure defaults mean systems are secure out of the box",
        "Deployment models: on-premises, cloud, hybrid, multi-cloud each have considerations",
        "Baseline configurations provide standard secure settings for consistency"
      ],

      "real_world_example": {
        "scenario": "Secure design preventing data exposure",
        "company": "Coastal Community Bank",
        "application": "Coastal designed their new mobile banking app with security by design: INPUT VALIDATION (all input validated server-side, whitelist approach for account numbers and amounts), OUTPUT ENCODING (dynamic content encoded to prevent XSS), SECURE DEFAULTS (session timeout 5 minutes, biometric auth enabled by default, screenshot blocking enabled), CRYPTOGRAPHIC PROTECTION (TLS 1.3 required, certificate pinning, sensitive data encrypted in app storage), PRIVACY BY DESIGN (only necessary data collected, clear retention policies, user control over data sharing), RESULT (app passed security assessment with zero critical findings, compared to previous version that had 12 critical issues discovered post-launch)."
      },

      "exam_tips": [
        "Security by design = built in from start (not added later)",
        "Privacy by design = data minimization, purpose limitation (GDPR requirement)",
        "Secure defaults = secure out of box, user opts into risk",
        "Baseline configuration = standard secure config for consistency",
        "Hybrid/multi-cloud adds complexity to security management"
      ],

      "glossary_terms": [
        {
          "term": "Security by Design",
          "definition": "An approach that integrates security considerations into every phase of system development, from requirements through deployment.",
          "exam_note": "Built in from start. Not bolted on. Part of requirements. Throughout lifecycle."
        },
        {
          "term": "Privacy by Design",
          "definition": "A framework requiring privacy to be embedded into system design, including data minimization, purpose limitation, and user control.",
          "exam_note": "Privacy from start. Data minimization. GDPR requirement. User control."
        },
        {
          "term": "Secure Defaults",
          "definition": "Designing systems to be secure in their default configuration, requiring users to explicitly enable less secure features.",
          "exam_note": "Secure out of box. User opts into risk. Conservative settings. Minimum functionality."
        },
        {
          "term": "Baseline Configuration",
          "definition": "A documented standard configuration for systems that provides a consistent, secure starting point for deployment.",
          "exam_note": "Standard secure config. Consistent. Track deviations. Golden image concept."
        }
      ],

      "knowledge_check": {
        "question": "A new application is being designed where only the minimum necessary personal data is collected, data is only used for stated purposes, and users have control over their information. This approach is called:",
        "options": [
          "Security by design because security is considered",
          "Privacy by design because privacy is embedded in the design",
          "Defense in depth because multiple controls are used",
          "Least privilege because minimum data is collected"
        ],
        "correct": 1,
        "explanation": "This is Privacy by Designâ€”the approach embeds privacy into system design through principles like data minimization (only necessary data), purpose limitation (only stated uses), and user control. Security by design is broader. Defense in depth refers to layered controls. Least privilege is about access rights, not data collection."
      }
    },
    {
      "section_id": "D3-L001-S05",
      "title": "Architecture Review and Assessment",
      "content": "Architecture review evaluates security design decisions to identify weaknesses before implementation and during operations.\n\n**Architecture Review Process**\n\n*When to Review*\n- New system design\n- Significant changes\n- Acquisition/merger\n- Compliance requirements\n- Periodic reassessment\n\n*Review Scope*\n- Network architecture\n- System components\n- Data flows\n- Access controls\n- Integration points\n- Failure modes\n\n**Review Techniques**\n\n*Documentation Review*\n- Architecture diagrams\n- Data flow diagrams\n- Security requirements\n- Design documents\n- Configuration standards\n\n*Threat Modeling*\n- Identify threats to system\n- STRIDE methodology\n- Attack trees\n- Prioritize mitigations\n\n*Control Assessment*\n- Are controls appropriate?\n- Do they address threats?\n- Are there gaps?\n- Defense in depth?\n\n**STRIDE Threat Model**\n\n*Spoofing*\n- Pretending to be someone/something else\n- Authentication controls\n\n*Tampering*\n- Unauthorized modification\n- Integrity controls\n\n*Repudiation*\n- Denying actions taken\n- Logging and audit trails\n\n*Information Disclosure*\n- Unauthorized data access\n- Confidentiality controls\n\n*Denial of Service*\n- Making system unavailable\n- Availability controls\n\n*Elevation of Privilege*\n- Gaining unauthorized access\n- Authorization controls\n\n**Common Architecture Weaknesses**\n\n*Single Points of Failure*\n- One component failure = system failure\n- Need redundancy\n\n*Flat Networks*\n- No segmentation\n- Easy lateral movement\n- Breach spreads quickly\n\n*Excessive Trust*\n- Components trust each other implicitly\n- Missing authentication between systems\n- Internal = trusted assumption\n\n*Missing Monitoring*\n- Can't detect attacks\n- Insufficient logging\n- No alerting\n\n*Weak Boundaries*\n- Unclear trust boundaries\n- Inconsistent controls\n- Gaps at integration points\n\n**Architecture Decision Documentation**\n\n*Architecture Decision Record (ADR)*\n- Context (why deciding)\n- Decision made\n- Consequences\n- Alternatives considered\n\n*Benefits*\n- Institutional knowledge\n- Understand rationale\n- Future reference\n- Consistency",

      "key_points": [
        "Review architecture for new systems, significant changes, and periodically",
        "Threat modeling identifies threats; STRIDE is common methodology",
        "STRIDE: Spoofing, Tampering, Repudiation, Info Disclosure, DoS, Elevation of Privilege",
        "Common weaknesses: single points of failure, flat networks, excessive trust",
        "Document architecture decisions with context, decision, and consequences"
      ],

      "real_world_example": {
        "scenario": "Architecture review finding critical weaknesses",
        "company": "GlobalRetail Inc.",
        "application": "GlobalRetail conducted an architecture review of their e-commerce platform before a major upgrade: THREAT MODELING (STRIDE analysis identified 23 potential threats), KEY FINDINGS (SPOOFING: API authentication between microservices was missingâ€”services trusted internal network, INFORMATION DISCLOSURE: customer PII traversed internal network unencrypted, DENIAL OF SERVICE: no rate limiting on product APIâ€”could be overwhelmed, ELEVATION OF PRIVILEGE: database service account had admin rights instead of minimal), REMEDIATION (implemented mTLS between services, encrypted internal traffic, added rate limiting, applied least privilege to service accounts), OUTCOME (review prevented issues before production launch, estimated $2M+ savings vs. post-breach remediation)."
      },

      "exam_tips": [
        "STRIDE = threat modeling methodology (6 threat categories)",
        "S=Spoofing, T=Tampering, R=Repudiation, I=Info Disclosure, D=DoS, E=Elevation",
        "Common weaknesses: flat networks, single points of failure, excessive trust",
        "Review architecture before deployment and after significant changes",
        "Threat modeling identifies threats BEFORE they're exploited"
      ],

      "glossary_terms": [
        {
          "term": "Threat Modeling",
          "definition": "A process of identifying potential threats to a system, assessing their likelihood and impact, and determining appropriate mitigations.",
          "exam_note": "Identify threats. Prioritize mitigations. STRIDE is common method. Done during design."
        },
        {
          "term": "STRIDE",
          "definition": "A threat modeling methodology categorizing threats as Spoofing, Tampering, Repudiation, Information Disclosure, Denial of Service, and Elevation of Privilege.",
          "exam_note": "6 threat categories. Microsoft developed. Common methodology. Maps to CIA+"
        },
        {
          "term": "Single Point of Failure",
          "definition": "A component whose failure causes the entire system to fail, representing an architectural weakness.",
          "exam_note": "One failure = system down. Need redundancy. Common architecture weakness."
        },
        {
          "term": "Trust Boundary",
          "definition": "A point in a system where the level of trust changes, requiring security controls to validate interactions crossing the boundary.",
          "exam_note": "Where trust level changes. Needs validation. Common place for vulnerabilities."
        }
      ],

      "knowledge_check": {
        "question": "During a security architecture review, an analyst uses a methodology that categorizes threats into Spoofing, Tampering, Repudiation, Information Disclosure, Denial of Service, and Elevation of Privilege. This methodology is called:",
        "options": [
          "PASTA because it's a risk-centric approach",
          "STRIDE because it categorizes six types of threats",
          "DREAD because it rates threat severity",
          "OCTAVE because it's organization-focused"
        ],
        "correct": 1,
        "explanation": "STRIDE is the threat modeling methodology that categorizes threats into these six categories: Spoofing, Tampering, Repudiation, Information Disclosure, Denial of Service, and Elevation of Privilege. PASTA is Process for Attack Simulation and Threat Analysis. DREAD is a risk rating methodology. OCTAVE is an organizational risk assessment framework."
      }
    }
  ],

  "hands_on_activity": {
    "title": "Security Architecture Design Exercise",
    "objective": "Design a secure architecture for a new system using proper principles and techniques",
    "scenario": "You're the security architect at Apex Consulting Group. Design the security architecture for a new customer portal that will handle sensitive financial data.",
    "steps": [
      "Step 1: Define the architecture requirements:\n   - Customer-facing web portal\n   - Integration with internal CRM and billing systems\n   - Handles sensitive financial data (PCI DSS scope)\n   - Must support 10,000 concurrent users\n   - 99.9% availability requirement",
      "Step 2: Design the network architecture:\n   - Define network zones (external, DMZ, internal, restricted)\n   - Determine segmentation approach\n   - Design traffic flows between zones\n   - Draw architecture diagram",
      "Step 3: Apply Zero Trust principles:\n   - How will users be authenticated?\n   - How will devices be validated?\n   - What conditional access policies apply?\n   - How is least privilege implemented?",
      "Step 4: Conduct threat modeling using STRIDE:\n   - For each component, identify applicable threats\n   - Determine mitigations for each threat\n   - Document in threat model format",
      "Step 5: Define baseline configurations:\n   - Web servers\n   - Database servers\n   - Network devices\n   - What standards will you reference?",
      "Step 6: Identify potential architecture weaknesses:\n   - Single points of failure?\n   - Flat network risks?\n   - Trust boundary issues?\n   - How will you address each?",
      "Step 7: Document architecture decisions with rationale"
    ],
    "expected_outcome": "Complete security architecture design including network diagram, Zero Trust implementation plan, threat model, baseline configurations, and architecture decision documentation.",
    "reflection_questions": [
      "How does defense in depth apply to your architecture?",
      "What would happen if each component failedâ€”is the system fail secure?",
      "How would you validate that the implemented architecture matches the design?"
    ]
  },

  "what_would_you_do": {
    "scenario": "You're the security architect at Pinnacle Financial Services. The development team has designed a new microservices architecture where services communicate over the internal network using HTTP (not HTTPS) because 'it's all internal traffic and encryption adds latency.' They argue the network is segmented and firewalled, so internal encryption is unnecessary overhead.",
    "context": "The services handle customer financial data. Compliance requires data protection. The network is segmented with VLANs. Some services communicate across different VLANs. The development team is under pressure to deliver quickly.",
    "question": "How do you respond to this architectural decision?",
    "options": [
      {
        "id": "a",
        "text": "Accept the decision since the network is segmented and firewalled",
        "is_best": false,
        "feedback": "This violates Zero Trust principles and likely compliance requirements. Segmentation reduces but doesn't eliminate riskâ€”attackers who breach one segment can sniff unencrypted traffic. Network position shouldn't grant implicit trust for sensitive data.",
        "consequences": "Internal traffic exposed to eavesdropping. Compliance violations likely (PCI DSS requires encryption). Zero Trust principles violated. If breached, data exposed."
      },
      {
        "id": "b",
        "text": "Require encryption but accept self-signed certificates to reduce implementation burden",
        "is_best": false,
        "feedback": "Self-signed certificates without proper validation enable man-in-the-middle attacks. Attackers can intercept and present their own certificates. This provides false security while adding implementation burden without real protection.",
        "consequences": "False sense of security. MitM attacks still possible. Compliance may still be violated. Wasted effort on ineffective control."
      },
      {
        "id": "c",
        "text": "Require mTLS (mutual TLS) between services with proper certificate management",
        "is_best": true,
        "feedback": "This is the Zero Trust approachâ€”encrypt all traffic and verify both ends of communication. mTLS ensures services authenticate to each other and all communication is encrypted. The latency impact of modern TLS is minimal (typically <1ms). This meets compliance requirements and protects against internal threats.",
        "consequences": "All internal traffic encrypted. Services mutually authenticate. Compliance satisfied. Minimal latency impact with modern TLS. Zero Trust aligned."
      },
      {
        "id": "d",
        "text": "Implement a compensating control like enhanced network monitoring instead of encryption",
        "is_best": false,
        "feedback": "Monitoring is detective, not preventiveâ€”it doesn't protect data in transit. If an attacker can read traffic, monitoring only tells you after the fact. Encryption is the appropriate control for data-in-transit protection. Compensating controls should be used when primary controls aren't feasible, but encryption is clearly feasible here.",
        "consequences": "Data still exposed. Monitoring detects but doesn't prevent. Compliance not met. Compensating control isn't equivalent protection."
      }
    ],
    "key_lesson": "Zero Trust means no implicit trust based on network locationâ€”even internal traffic should be encrypted and authenticated. Modern TLS has minimal performance impact. 'It's internal' is not a valid security argument. Compliance requirements for financial data typically mandate encryption in transit. Architecture decisions that skip security for convenience create technical debt and risk."
  },

  "summary": {
    "key_takeaways": [
      "Security architecture provides the blueprint for consistent security implementation",
      "Defense in depth uses multiple layers; assume each layer may fail",
      "Network zones (External, DMZ, Internal, Restricted) segment by trust level",
      "Zero Trust: never trust, always verifyâ€”verify explicitly, least privilege, assume breach",
      "STRIDE threat modeling identifies Spoofing, Tampering, Repudiation, Info Disclosure, DoS, Elevation",
      "Security by design builds security in from start, not bolted on later"
    ],
    "exam_essentials": [
      "Defense in depth = multiple layers, no single point of failure",
      "Zero Trust = never trust, always verify (even internal)",
      "DMZ = buffer zone between external and internal networks",
      "Micro-segmentation = workload-level isolation (east-west traffic)",
      "STRIDE = threat modeling methodology (6 categories)",
      "Fail secure = default to safe state on failure"
    ],
    "connection_to_next": "Security architecture provides the foundation for secure systems. The next lesson explores infrastructure security in detailâ€”hardening servers, securing endpoints, and protecting the physical and virtual infrastructure that hosts our applications and data."
  },

  "related_content": {
    "simulations": ["D3-SIM-002"],
    "remediation": ["D3-REM-001"],
    "next_lesson": "D3-LESSON-002",
    "previous_lesson": "D2-LESSON-012"
  }
}
